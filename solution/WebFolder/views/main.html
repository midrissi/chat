<div class="col-md-8 conversation"> <div class="panel panel-info"> <div class="panel-heading"> {{people.selected? people.selected.fullname: 'Chat Panel'}} </div> <div class="panel-body" scroll-glue> <ul class="media-list" ng-if="messages.length > 0"> <li class="media" ng-repeat="msg in messages" ng-class="{me: isMe(msg.sender)}"> <div class="media-body"> <div class="media"> <a class="pull-{{isMe(msg.sender)?'right':'left'}}" href=""> <img class="media-object img-circle" ng-src="{{getAvatar(msg.sender)}}"> </a> <div class="media-body"> <p ng-repeat="t in msg.text">{{t.text}}</p> <small class="text-muted">{{msg.sender.fullname}} | {{msg.text[msg.text.length - 1].date|date:'medium'}}</small> <hr> </div> </div> </div> </li> </ul> <p style="text-align: center;margin-top: 50%" ng-if="!conversation"> Choose a user to start chatting. </p> <p style="text-align: center;margin-top: 50%" ng-if="conversation && messages.length == 0"> Type a message to start chatting. </p> </div> <div class="panel-footer"> <form class="input-group" ng-submit="send(newMsg)" style="visibility:{{people.selected? 'initial': 'hidden'}}"> <input type="text" class="form-control" ng-model="newMsg" placeholder="Enter Message"> <span class="input-group-btn"> <button class="btn btn-info" type="submit">SEND</button> </span> </form> </div> </div> </div> <div class="col-md-4 users"> <div class="panel panel-primary"> <div class="panel-heading"> {{current.fullname}} <a href="" ng-click="logout()" style="color: white" class="pull-right">Logout</a> </div> <div class="panel-body"> <ul class="media-list"> <li class="media" ng-repeat="p in people" ng-click="people.selected = p" ng-class="{selected: p.__KEY === people.selected.__KEY, unread: p.preview.unread}"> <div class="media-body"> <div class="media"> <a class="pull-left" href=""> <img class="media-object img-circle" style="max-height:40px" ng-src="{{getAvatar(p)}}"> </a> <div class="media-body"> <h5>{{p.preview.unread? '(' + p.preview.unread + ')': ''}} {{p.fullname}}</h5> <small class="text-muted" ng-if="p.preview.last_message"> <strong>{{p.preview.user}}:</strong> {{p.preview.last_message|string_shorten:20}} </small> <small class="text-muted" ng-if="!p.preview.last_message">No message</small> </div> </div> </div> </li> </ul> </div> </div> </div>